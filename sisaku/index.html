<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>é‡ã­æ–‡å­—ã‚ã¦ã‚²ãƒ¼ãƒ ï¼‹é«˜é€Ÿãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</title>
  <style>
    body { font-family: sans-serif; }
    #mysvg { background: #fff; display: block; margin-bottom: 1em; }
    #result { margin-top: 1em; font-weight: bold; }
    .modal-bg {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.3);
      align-items: center;
      justify-content: center;
    }
    .modal {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.15);
      padding: 2em 3em;
      text-align: center;
      min-width: 2em;
      min-height: 2em;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'serif';
      font-size: 2.5em;
      letter-spacing: 0.2em;
      position: relative;
      animation: modalPop 0.3s;
      user-select: none;
    }
    @keyframes modalPop {
      0% { transform: scale(0.7); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body>
  <svg id="mysvg" width="500" height="150"></svg>
  <button id="remove-btn">ä¸€æ–‡å­—æ¶ˆã™</button>
  <button id="hint-btn">ãƒ’ãƒ³ãƒˆï¼ˆãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ï¼‰</button>
  <div style="margin-top:1em;">
    <input id="answer" type="text" placeholder="ã“ã“ã«å˜èªã‚’å…¥åŠ›" style="font-size:1.2em;">
    <button id="check-btn">ç­”ãˆåˆã‚ã›</button>
  </div>
  <div id="result"></div>

  <!-- ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="modal-bg" class="modal-bg">
    <div id="modal" class="modal"></div>
  </div>
  <script>
    const answerText = "å¾“é‡èª²é‡‘";
    const svg = document.getElementById("mysvg");
    const textElements = [];

    // SVGã«ä¸€æ–‡å­—ãšã¤é‡ã­ã¦è¿½åŠ 
    for (let i = 0; i < answerText.length; i++) {
      const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
      t.setAttribute("x", 50);
      t.setAttribute("y", 110);
      t.setAttribute("font-size", 100);
      t.setAttribute("font-family", "serif");
      t.textContent = answerText[i];
      svg.appendChild(t);
      textElements.push(t);
    }

    // ä¸€æ–‡å­—ãšã¤æ¶ˆã™
    document.getElementById("remove-btn").addEventListener("click", () => {
      if (textElements.length > 0) {
        const last = textElements.shift();
        document.getElementById("answer").value += last.textContent;
        svg.removeChild(last);
      }
    });

    // ç­”ãˆåˆã‚ã›
    document.getElementById("check-btn").addEventListener("click", () => {
      const userAnswer = document.getElementById("answer").value;
      const result = document.getElementById("result");
      if (userAnswer === answerText) {
        result.textContent = "æ­£è§£ï¼ğŸ‰";
        result.style.color = "green";
      } else {
        result.textContent = "ä¸æ­£è§£â€¦";
        result.style.color = "red";
      }
    });

    // ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ã‚¢ãƒ‹ãƒ¡ï¼ˆã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³â†’é«˜é€Ÿé‡ã­æ–‡å­—è¡¨ç¤ºï¼‰
    document.getElementById("hint-btn").addEventListener("click", () => {
      showFlashCard(answerText);
    });

    function showFlashCard(text) {
      const modalBg = document.getElementById("modal-bg");
      const modal = document.getElementById("modal");
      modal.innerHTML = "";
      modalBg.style.display = "flex";

      // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ¼”å‡ºï¼ˆ3, 2, 1ï¼‰
      let count = 3;
      modal.textContent = count;
      let countdown = setInterval(() => {
        count--;
        if (count > 0) {
          modal.textContent = count;
        } else {
          clearInterval(countdown);
          // ã»ã‚“ã®å°‘ã—é–“ã‚’ç½®ã„ã¦ã‹ã‚‰é‡ã­æ–‡å­—ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
          setTimeout(() => {
            // å…¨ã¦ã®<text>ã‚’åŒã˜ä½ç½®ã§é‡ã­ã‚‹ï¼ˆSVGã¨åŒã˜ï¼‰
            modal.innerHTML = "";
            const svgNS = "http://www.w3.org/2000/svg";
            // SVGã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆä½œæˆ
            let tempSvg = document.createElementNS(svgNS, "svg");
            tempSvg.setAttribute("width", "200");
            tempSvg.setAttribute("height", "120");
            tempSvg.setAttribute("viewBox", "0 0 200 120");
            tempSvg.style.display = "block";
            modal.appendChild(tempSvg);

            let idx = 0;
            let interval = setInterval(() => {
              if (idx < text.length) {
                // é‡ã­ã¦åŒã˜ä½ç½®ã«è¿½åŠ 
                const t = document.createElementNS(svgNS, "text");
                t.setAttribute("x", 50);
                t.setAttribute("y", 90);
                t.setAttribute("font-size", 80);
                t.setAttribute("font-family", "serif");
                t.textContent = text[idx];
                tempSvg.appendChild(t);
                idx++;
              } else {
                clearInterval(interval);
                // 0.8ç§’å¾Œã«è‡ªå‹•ã§æ¶ˆãˆã‚‹
                setTimeout(() => {
                  modalBg.style.display = "none";
                }, 800);
              }
            }, 70); // é«˜é€Ÿï¼ˆ0.07ç§’ã”ã¨ã«1æ–‡å­—ãšã¤ï¼‰
          }, 300);
        }
      }, 600); // 0.6ç§’ã”ã¨ã«ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
    }

    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å¤–å´ã‚¯ãƒªãƒƒã‚¯ã§å³é–‰ã˜ã‚‹
    document.getElementById("modal-bg").addEventListener("click", function(e) {
      if (e.target === this) {
        this.style.display = "none";
      }
    });
  </script>
</body>
</html>